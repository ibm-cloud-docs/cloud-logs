---

copyright:
  years:  2024
lastupdated: "2024-06-19"

keywords:

subcollection: cloud-logs

---

{{site.data.keyword.attribute-definition-list}}



# Migrating {{site.data.keyword.la_full_notm}} instances
{: #migration-la}

Migrating {{site.data.keyword.la_full}} instances to {{site.data.keyword.logs_full_notm}} in {{site.data.keyword.cloud_notm}} require the configuration of the {{site.data.keyword.logs_routing_full_notm}} service in the account and provisioning {{site.data.keyword.logs_full_notm}} instances. A migration tool is provided to help you migrate.
{: shortdesc}


## Overview
{: #la-overview}

You currently can use {{site.data.keyword.la_full_notm}} instances to monitor application logs, operational logs, and platform logs in the {{site.data.keyword.cloud_notm}}.

To monitor platform logs, you must configure an {{site.data.keyword.la_full_notm}} instance for each region where you operate and where logs are generated by enabled services and the {{site.data.keyword.cloud_notm}} platform. Platform logs are regional.

Platform logs are regional and only one {{site.data.keyword.la_full_notm}} instance can be configured to receive platform logs in a region. When migrating to {{site.data.keyword.logs_full_notm}} this is unchanged. Only one {{site.data.keyword.logs_full_notm}} instance can be configured in a region to receive platform logs.
{: note}

To migrate {{site.data.keyword.la_full_notm}} instances that collect platform logs, you must configure {{site.data.keyword.logs_routing_full_notm}} and provision {{site.data.keyword.logs_full_notm}} instances in the account to replace the existing {{site.data.keyword.la_full_notm}} instances.

The following image shows the high-level view of how {{site.data.keyword.logs_routing_full_notm}} and {{site.data.keyword.logs_full_notm}} are integrated so you can monitor and alert on platform logs.

![Account overview of handling platform logs.](/images/migration-la-1.png "Account overview of handling platform logs."){: caption="Figure 1. Overview of handling platform logs." caption-side="bottom"}

To migrate {{site.data.keyword.la_full_notm}} instances that collect only operational and application logs, you must provision {{site.data.keyword.logs_full_notm}} instances in the account to replace the existing {{site.data.keyword.la_full_notm}} instances. You must also configure your data sources to send data to these {{site.data.keyword.logs_full_notm}} instances. You can configure an {{site.data.keyword.logs_routing_full_notm}} agent on supported platforms such as Kubernetes clusters, Red Hat OpenShift clusters, and Linux servers, or send data directly to {{site.data.keyword.logs_full_notm}} by using the ingestion endpoint. Clusters sending logs can be in {{site.data.keyword.cloud_notm}}, on-prem, or running in another cloud service.


## Checklist to plan for migration
{: #la-checklist}

Consider these items when you are planning your migration of {{site.data.keyword.la_full_notm}} instances in an account:

- [ ] Identify the regions where you operate and where {{site.data.keyword.la_full_notm}} instances are provisioned.

- [ ] Identify the {{site.data.keyword.la_full_notm}} instances in regions where your [platform logs are configured to be collected](/docs/log-analysis?topic=log-analysis-config_svc_logs&interface=ui).

- [ ] Check your requirements for long-term storage. Do you have [archiving](/docs/log-analysis?topic=log-analysis-archiving-ov) configured for each {{site.data.keyword.la_full_notm}} instance? How long do you keep the data?

    In {{site.data.keyword.logs_full_notm}}, you can query all data that is stored in your configured {{site.data.keyword.cos_full_notm}} bucket. You own and maintain the bucket and the data stored in it.
    {: note}

- [ ] Are you streaming any data to other 3rd-party tools?

    The data format of logs does not change as part of the deprecation of the {{site.data.keyword.la_full_notm}} service.
    {: important}

- [ ] Are you [excluding any data at ingestion](/docs/log-analysis?topic=log-analysis-exclusion_rules) to reduce costs? Would it be useful to keep these logs for search or even for compliance? The {{site.data.keyword.logs_full_notm}} service offers a TCO feature to help you optimize costs based on data criticality and operational requirements. Take time to identify useful logs that you might be currently dropping due to cost constraints.

- [ ] Are you controlling data usage by configuring [index rate alerts](/docs/log-analysis?topic=log-analysis-control_usage_index_rate)?

- [ ] Do you [control access](/docs/log-analysis?topic=log-analysis-iam) by using access groups? Do you use trusted profiles or service IDs? [Identify the policies](/docs/log-analysis?topic=log-analysis-iam#iam_accesspolicy) in the account that grant permissions to operate the {{site.data.keyword.la_full_notm}} instances in the account.

- [ ] What [notification channels](/docs/log-analysis?topic=log-analysis-alerts#alerts_channels) do you use for alerting? Email, slack, PagerDuty, webhook, {{site.data.keyword.mon_full_notm}} (Sysdig).

- [ ] Make an inventory of the different types of sources of infrastructure and application logs that you are monitoring. What are your sources of the data? Do you collect logs from Kubernetes clusters, Red Hat OpenShift clusters, bare servers and so on?


## Migration steps
{: #la-migration-steps}

To migrate {{site.data.keyword.la_full_notm}} instances in the account, complete the following steps:

1. Run the migration tool to collect information about what instances need to be migrated and their resources.

    ```text
    ibmcloud logging migrate generate-terraform --scope account --service logdna
    ```
    {: pre}


2. Migrate each instance by running one of these commands:

    * To generate terraform scripts that you can modify, run:

       ```text
       ibmcloud logging migrate create-resources --scope instance --instance-crn CRNvalue --terraform
       ```
       {: pre}

    * To migrate an instance by applying Terraform, run:

       ```text
       ibmcloud logging migrate create-resources --scope instance --instance-crn CRNvalue --terraform -f
       ```
       {: pre}

    * To migrate an instance directly without Terraform, run:

       ```text
       ibmcloud logging migrate create-resources --scope instance --instance-crn CRNvalue --api
       ```
       {: pre}

3. Manually configure notification channels such as email, and PagerDuty.

    If you use the terraform option, variables are provided for you to enter information on the slack URL and the webhook header apikey.

   {{site.data.keyword.logs_full_notm}} alerting is done by using the {{site.data.keyword.en_full_notm}} service.
   {: note}

4. After you migrate each of the instances in the account, configure {{site.data.keyword.logs_routing_full_notm}}.

    ```text
    ibmcloud logging migrate create-resources --scope logs-router
    ```
    {: pre}

    The tool configures the account to map your current {{site.data.keyword.la_full_notm}} architecture for managing platform logs to use {{site.data.keyword.logs_routing_full_notm}}.

    This function is in plan, but not currently available.
    {: restriction}

5. Configure your data sources to send data to the newly created {{site.data.keyword.logs_full_notm}} instance that replaces the {{site.data.keyword.la_full_notm}} instance where that source currently sends data.

    You can send data in parallel to your {{site.data.keyword.la_full_notm}} instance and to your new {{site.data.keyword.logs_full_notm}} instance so that you can validate the new configuration is working a required.
    {: tip}

6. Validate that the new configuration is working for your requirements.

7. After you validate your configuration is operating as required, delete your {{site.data.keyword.la_full_notm}} instances and your legacy configurations to send data.
